{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { useReducer } from 'react';\nimport CartContext from './cart-context';\nexport const defaultCartState = {\n  items: [],\n  totalAmount: 0\n};\nconst initialCartState = {\n  items: [],\n  totalAmount: 0\n};\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: initialCartState,\n  reducers: {\n    add(state, action) {\n      const updatedTotalAmount = state.totalAmount + action.item.price * action.item.amount;\n      const existingCartItemIndex = state.items.findIndex(item => item.id === action.item.id);\n      const existingCartItem = state.items[existingCartItemIndex];\n      let updatedItems;\n\n      if (existingCartItem) {\n        const updatedItem = { ...existingCartItem,\n          amount: existingCartItem.amount + action.item.amount\n        };\n        updatedItems = [...state.items];\n        updatedItems[existingCartItemIndex] = updatedItem;\n      } else {\n        updatedItems = state.items.concat(action.item);\n      }\n\n      return {\n        items: updatedItems,\n        totalAmount: updatedTotalAmount\n      };\n    },\n\n    remove(state, action) {\n      const existingCartItemIndex = state.items.findIndex(item => item.id === action.id);\n      const existingItem = state.items[existingCartItemIndex];\n      const updatedTotalAmount = state.totalAmount - existingItem.price;\n      let updatedItems;\n\n      if (existingItem.amount === 1) {\n        updatedItems = state.items.filter(item => item.id !== action.id);\n      } else {\n        const updatedItem = { ...existingItem,\n          amount: existingItem.amount - 1\n        };\n        updatedItems = [...state.items];\n        updatedItems[existingCartItemIndex] = updatedItem;\n      }\n\n      return {\n        items: updatedItems,\n        totalAmount: updatedTotalAmount\n      };\n    },\n\n    clear() {\n      return defaultCartState;\n    }\n\n  }\n});\nexport const cartActions = cartSlice.actions;\nexport const cartReducer = cartSlice.reducer; // const CartProvider = (props) => {\n//     const [cartState, dispatchCartAction] = useReducer(\n//       cartReducer,\n//       defaultCartState\n//     );\n//     const addItemToCartHandler = (item) => {\n//       dispatchCartAction(cartActions.add(item));\n//     };\n//     const removeItemFromCartHandler = (id) => {\n//       dispatchCartAction(cartActions.remove(id));\n//     };\n//     const clearCartHandler = () => {\n//       dispatchCartAction(cartActions.clear());\n//     };\n//     const cartContext = {\n//       items: cartState.items,\n//       totalAmount: cartState.totalAmount,\n//       addItem: addItemToCartHandler,\n//       removeItem: removeItemFromCartHandler,\n//       clearCart: clearCartHandler\n//     };\n//     return (\n//       <CartContext.Provider value={cartContext}>\n//         {props.children}\n//       </CartContext.Provider>\n//     );\n//   };\n//   export default CartProvider;","map":{"version":3,"sources":["D:/React Learning/reactLearning/react-food-order-app/react-food-order-app/src/store/cart-redux.js"],"names":["createSlice","useReducer","CartContext","defaultCartState","items","totalAmount","initialCartState","cartSlice","name","initialState","reducers","add","state","action","updatedTotalAmount","item","price","amount","existingCartItemIndex","findIndex","id","existingCartItem","updatedItems","updatedItem","concat","remove","existingItem","filter","clear","cartActions","actions","cartReducer","reducer"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport { useReducer } from 'react'\r\nimport CartContext from './cart-context';\r\n\r\nexport const defaultCartState = {\r\n    items: [],\r\n    totalAmount: 0,\r\n};\r\n\r\nconst initialCartState = {\r\n    items: [],\r\n    totalAmount: 0,\r\n};\r\n\r\nconst cartSlice = createSlice({\r\n    name: 'cart',\r\n    initialState: initialCartState,\r\n    reducers: {\r\n        add(state, action) {\r\n            const updatedTotalAmount =\r\n                state.totalAmount + action.item.price * action.item.amount;\r\n\r\n            const existingCartItemIndex = state.items.findIndex(\r\n                (item) => item.id === action.item.id\r\n            );\r\n            const existingCartItem = state.items[existingCartItemIndex];\r\n            let updatedItems;\r\n\r\n            if (existingCartItem) {\r\n                const updatedItem = {\r\n                    ...existingCartItem,\r\n                    amount: existingCartItem.amount + action.item.amount,\r\n                };\r\n                updatedItems = [...state.items];\r\n                updatedItems[existingCartItemIndex] = updatedItem;\r\n            } else {\r\n                updatedItems = state.items.concat(action.item);\r\n            }\r\n\r\n            return {\r\n                items: updatedItems,\r\n                totalAmount: updatedTotalAmount,\r\n            };\r\n        },\r\n        remove(state, action) {\r\n            const existingCartItemIndex = state.items.findIndex(\r\n                (item) => item.id === action.id\r\n            );\r\n            const existingItem = state.items[existingCartItemIndex];\r\n            const updatedTotalAmount = state.totalAmount - existingItem.price;\r\n            let updatedItems;\r\n            if (existingItem.amount === 1) {\r\n                updatedItems = state.items.filter(item => item.id !== action.id);\r\n            } else {\r\n                const updatedItem = { ...existingItem, amount: existingItem.amount - 1 };\r\n                updatedItems = [...state.items];\r\n                updatedItems[existingCartItemIndex] = updatedItem;\r\n            }\r\n\r\n            return {\r\n                items: updatedItems,\r\n                totalAmount: updatedTotalAmount\r\n            };\r\n        },\r\n\r\n        clear() {\r\n            return defaultCartState;\r\n        }\r\n    },\r\n});\r\n\r\nexport const cartActions = cartSlice.actions;\r\n\r\nexport const cartReducer = cartSlice.reducer;\r\n\r\n// const CartProvider = (props) => {\r\n//     const [cartState, dispatchCartAction] = useReducer(\r\n//       cartReducer,\r\n//       defaultCartState\r\n//     );\r\n\r\n//     const addItemToCartHandler = (item) => {\r\n//       dispatchCartAction(cartActions.add(item));\r\n//     };\r\n\r\n//     const removeItemFromCartHandler = (id) => {\r\n//       dispatchCartAction(cartActions.remove(id));\r\n//     };\r\n\r\n//     const clearCartHandler = () => {\r\n//       dispatchCartAction(cartActions.clear());\r\n//     };\r\n\r\n//     const cartContext = {\r\n//       items: cartState.items,\r\n//       totalAmount: cartState.totalAmount,\r\n//       addItem: addItemToCartHandler,\r\n//       removeItem: removeItemFromCartHandler,\r\n//       clearCart: clearCartHandler\r\n//     };\r\n\r\n//     return (\r\n//       <CartContext.Provider value={cartContext}>\r\n//         {props.children}\r\n//       </CartContext.Provider>\r\n//     );\r\n//   };\r\n\r\n//   export default CartProvider;"]},"metadata":{},"sourceType":"module"}