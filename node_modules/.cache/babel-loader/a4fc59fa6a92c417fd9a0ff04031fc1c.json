{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { useReducer } from 'react';\nimport CartContext from './cart-context';\nexport const defaultCartState = {\n  items: [],\n  totalAmount: 0\n};\nconst initialCartState = {\n  items: [],\n  totalAmount: 0\n};\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: initialCartState,\n  reducers: {\n    add(state, action) {\n      console.log(action);\n      const {\n        item\n      } = action.payload;\n      const updatedTotalAmount = state.totalAmount + item.price * item.amount;\n      const existingCartItemIndex = state.items.findIndex(everyItem => everyItem.id === item.id);\n      const existingCartItem = state.items[existingCartItemIndex];\n      let updatedItems;\n\n      if (existingCartItem) {\n        const updatedItem = { ...existingCartItem,\n          amount: existingCartItem.amount + item.amount\n        };\n        updatedItems = [...state.items];\n        updatedItems[existingCartItemIndex] = updatedItem;\n      } else {\n        updatedItems = state.items.concat(item);\n      }\n\n      return {\n        items: updatedItems,\n        totalAmount: updatedTotalAmount\n      };\n    },\n\n    remove(state, action) {\n      const {\n        id\n      } = action.payload;\n      const existingCartItemIndex = state.items.findIndex(item => item.id === id);\n      const existingItem = state.items[existingCartItemIndex];\n      const updatedTotalAmount = state.totalAmount - existingItem.price;\n      let updatedItems;\n\n      if (existingItem.amount === 1) {\n        updatedItems = state.items.filter(item => item.id !== id);\n      } else {\n        const updatedItem = { ...existingItem,\n          amount: existingItem.amount - 1\n        };\n        updatedItems = [...state.items];\n        updatedItems[existingCartItemIndex] = updatedItem;\n      }\n\n      return {\n        items: updatedItems,\n        totalAmount: updatedTotalAmount\n      };\n    },\n\n    clear() {\n      return defaultCartState;\n    }\n\n  }\n});\nexport const cartActions = cartSlice.actions;\nexport const cartReducer = cartSlice.reducer; // const CartProvider = (props) => {\n//     const [cartState, dispatchCartAction] = useReducer(\n//       cartReducer,\n//       defaultCartState\n//     );\n//     const addItemToCartHandler = (item) => {\n//       dispatchCartAction(cartActions.add(item));\n//     };\n//     const removeItemFromCartHandler = (id) => {\n//       dispatchCartAction(cartActions.remove(id));\n//     };\n//     const clearCartHandler = () => {\n//       dispatchCartAction(cartActions.clear());\n//     };\n//     const cartContext = {\n//       items: cartState.items,\n//       totalAmount: cartState.totalAmount,\n//       addItem: addItemToCartHandler,\n//       removeItem: removeItemFromCartHandler,\n//       clearCart: clearCartHandler\n//     };\n//     return (\n//       <CartContext.Provider value={cartContext}>\n//         {props.children}\n//       </CartContext.Provider>\n//     );\n//   };\n//   export default CartProvider;","map":{"version":3,"sources":["D:/React Learning/reactLearning/react-food-order-app/react-food-order-app/src/store/cart-redux.js"],"names":["createSlice","useReducer","CartContext","defaultCartState","items","totalAmount","initialCartState","cartSlice","name","initialState","reducers","add","state","action","console","log","item","payload","updatedTotalAmount","price","amount","existingCartItemIndex","findIndex","everyItem","id","existingCartItem","updatedItems","updatedItem","concat","remove","existingItem","filter","clear","cartActions","actions","cartReducer","reducer"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport { useReducer } from 'react'\r\nimport CartContext from './cart-context';\r\n\r\nexport const defaultCartState = {\r\n    items: [],\r\n    totalAmount: 0,\r\n};\r\n\r\nconst initialCartState = {\r\n    items: [],\r\n    totalAmount: 0,\r\n};\r\n\r\nconst cartSlice = createSlice({\r\n    name: 'cart',\r\n    initialState: initialCartState,\r\n    reducers: {\r\n        add(state, action) {\r\n            console.log(action)\r\n            const { item } = action.payload\r\n            const updatedTotalAmount =\r\n                state.totalAmount + item.price * item.amount;\r\n\r\n            const existingCartItemIndex = state.items.findIndex(\r\n                (everyItem) => everyItem.id === item.id\r\n            );\r\n            const existingCartItem = state.items[existingCartItemIndex];\r\n            let updatedItems;\r\n\r\n            if (existingCartItem) {\r\n                const updatedItem = {\r\n                    ...existingCartItem,\r\n                    amount: existingCartItem.amount + item.amount,\r\n                };\r\n                updatedItems = [...state.items];\r\n                updatedItems[existingCartItemIndex] = updatedItem;\r\n            } else {\r\n                updatedItems = state.items.concat(item);\r\n            }\r\n\r\n            return {\r\n                items: updatedItems,\r\n                totalAmount: updatedTotalAmount,\r\n            };\r\n        },\r\n        remove(state, action) {\r\n            const { id } = action.payload\r\n            const existingCartItemIndex = state.items.findIndex(\r\n                (item) => item.id === id\r\n            );\r\n            const existingItem = state.items[existingCartItemIndex];\r\n            const updatedTotalAmount = state.totalAmount - existingItem.price;\r\n            let updatedItems;\r\n            if (existingItem.amount === 1) {\r\n                updatedItems = state.items.filter(item => item.id !== id);\r\n            } else {\r\n                const updatedItem = { ...existingItem, amount: existingItem.amount - 1 };\r\n                updatedItems = [...state.items];\r\n                updatedItems[existingCartItemIndex] = updatedItem;\r\n            }\r\n\r\n            return {\r\n                items: updatedItems,\r\n                totalAmount: updatedTotalAmount\r\n            };\r\n        },\r\n\r\n        clear() {\r\n            return defaultCartState;\r\n        }\r\n    },\r\n});\r\n\r\nexport const cartActions = cartSlice.actions;\r\n\r\nexport const cartReducer = cartSlice.reducer;\r\n\r\n// const CartProvider = (props) => {\r\n//     const [cartState, dispatchCartAction] = useReducer(\r\n//       cartReducer,\r\n//       defaultCartState\r\n//     );\r\n\r\n//     const addItemToCartHandler = (item) => {\r\n//       dispatchCartAction(cartActions.add(item));\r\n//     };\r\n\r\n//     const removeItemFromCartHandler = (id) => {\r\n//       dispatchCartAction(cartActions.remove(id));\r\n//     };\r\n\r\n//     const clearCartHandler = () => {\r\n//       dispatchCartAction(cartActions.clear());\r\n//     };\r\n\r\n//     const cartContext = {\r\n//       items: cartState.items,\r\n//       totalAmount: cartState.totalAmount,\r\n//       addItem: addItemToCartHandler,\r\n//       removeItem: removeItemFromCartHandler,\r\n//       clearCart: clearCartHandler\r\n//     };\r\n\r\n//     return (\r\n//       <CartContext.Provider value={cartContext}>\r\n//         {props.children}\r\n//       </CartContext.Provider>\r\n//     );\r\n//   };\r\n\r\n//   export default CartProvider;"]},"metadata":{},"sourceType":"module"}